<!doctype html>
<html class="no-js" lang="en">
<head>
<meta charset="utf-8" />
<title>Spring Framework Component Container Decomposition &#8211; Eugene Petrenko</title>
<meta name="description" content="
  In this post I explain how one could split one huge components container into a number
  of smaller ones
"/>
<meta name="keywords" content="jonnyzzz, Евгений Петренко, Eugene Petrenko, IoC, JRE, Dependency Injection, DI, Component, Spring Framework, Spring IoC, classloaders, Spring, Component Container, java" />


<!-- Twitter Cards -->
<meta name="twitter:title" content="Spring Framework Component Container Decomposition -- Eugene Petrenko" />
<meta name="twitter:description" content="
  In this post I explain how one could split one huge components container into a number
  of smaller ones
" />
<meta name="twitter:site" content="@jonnyzzz" />
<meta name="twitter:creator" content="@jonnyzzz" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://jonnyzzz.com/images/me.jpg" />

<!-- Open Graph -->

<meta property="og:type" content="article" />
<meta property="og:image" content="https://jonnyzzz.com/images/me.jpg" />
<meta property="og:title" content="Spring Framework Component Container Decomposition -- Eugene Petrenko" />
<meta property="og:description" content="
  In this post I explain how one could split one huge components container into a number
  of smaller ones
" />
<meta property="og:url" content="https://jonnyzzz.com/blog/2014/05/14/spring-framework-component-container/" />
<meta property="og:site_name" content="Eugene Petrenko" />

<meta property="article:tag" content="jonnyzzz" />

<meta property="article:tag" content="Евгений Петренко" />

<meta property="article:tag" content="Eugene Petrenko" />


<meta property="article:tag" content="IoC" />

<meta property="article:tag" content="JRE" />

<meta property="article:tag" content="Dependency Injection" />

<meta property="article:tag" content="DI" />

<meta property="article:tag" content="Component" />

<meta property="article:tag" content="Spring Framework" />

<meta property="article:tag" content="Spring IoC" />

<meta property="article:tag" content="classloaders" />

<meta property="article:tag" content="Spring" />

<meta property="article:tag" content="Component Container" />

<meta property="article:tag" content="java" />



<!-- Webmaster Tools verfication -->
<meta name="google-site-verification" content="MJZCyfst2Tx4KyxbOIQu1fZyOSwA_JkQu73zJcfsl2g" />




<link rel="canonical" href="https://jonnyzzz.com/blog/2014/05/14/spring-framework-component-container/" />
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="ATOM Feed" />

<meta name="HandheldFriendly" content="True" />
<meta name="MobileOptimized" content="320" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css" />

<link rel="apple-touch-icon" sizes="57x57" href="/images/apple-icon-57x57.png" />
<link rel="apple-touch-icon" sizes="60x60" href="/images/apple-icon-60x60.png" />
<link rel="apple-touch-icon" sizes="72x72" href="/images/apple-icon-72x72.png" />
<link rel="apple-touch-icon" sizes="76x76" href="/images/apple-icon-76x76.png" />
<link rel="apple-touch-icon" sizes="114x114" href="/images/apple-icon-114x114.png" />
<link rel="apple-touch-icon" sizes="120x120" href="/images/apple-icon-120x120.png" />
<link rel="apple-touch-icon" sizes="144x144" href="/images/apple-icon-144x144.png" />
<link rel="apple-touch-icon" sizes="152x152" href="/images/apple-icon-152x152.png" />
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-icon-180x180.png" />
<link rel="icon" type="image/png" sizes="192x192"  href="/images/android-icon-192x192.png" />
<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png" />
<link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96x96.png" />
<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png" />
<link rel="manifest" href="/images/manifest.json" />
<meta name="msapplication-TileColor" content="#ffffff" />
<meta name="msapplication-TileImage" content="/images/ms-icon-144x144.png" />
<meta name="theme-color" content="#ffffff" />

</head>

<body id="post">

<div class="navigation-wrapper">
	<nav role="navigation" id="site-nav">
	    <ul>
      
		    <li><a href="/" >Home</a></li>
		  
		    <li><a href="/about/" >About</a></li>
		  
		    <li><a href="/blog/" >Blog</a></li>
		  
		    <li><a href="/projects/" >Projects</a></li>
		  
		    <li><a href="/talks/" >Talks</a></li>
		  
		    <li><a href="/tags/" >Tags</a></li>
		  
	    </ul>
	</nav>
</div><!-- /.navigation-wrapper -->

<header class="masthead">
	<div class="wrap">
      
      <h1 class="site-title"><a href="/">Eugene Petrenko</a></h1>
		<h2 class="site-description" itemprop="description">Founding Engineering Leader | Agentic AI DevTools & Experience</h2>
	</div>
</header><!-- /.masthead -->


<div id="main" role="main">
  <article class="hentry">
    
    <div class="entry-wrapper">
      <header class="entry-header">
        <ul class="entry-tags">
          <li><a href="/tags/#IoC" title="Pages tagged IoC">IoC</a></li><li><a href="/tags/#JRE" title="Pages tagged JRE">JRE</a></li><li><a href="/tags/#Dependency Injection" title="Pages tagged Dependency Injection">Dependency Injection</a></li><li><a href="/tags/#DI" title="Pages tagged DI">DI</a></li><li><a href="/tags/#Component" title="Pages tagged Component">Component</a></li><li><a href="/tags/#Spring Framework" title="Pages tagged Spring Framework">Spring Framework</a></li><li><a href="/tags/#Spring IoC" title="Pages tagged Spring IoC">Spring IoC</a></li><li><a href="/tags/#classloaders" title="Pages tagged classloaders">classloaders</a></li><li><a href="/tags/#Spring" title="Pages tagged Spring">Spring</a></li><li><a href="/tags/#Component Container" title="Pages tagged Component Container">Component Container</a></li><li><a href="/tags/#java" title="Pages tagged java">java</a></li>
        </ul>
        
          <h1 class="entry-title">Spring Framework Component Container Decomposition</h1>
        
      </header>
      <footer class="entry-meta">
        
        
          <img src="/images/me.jpg" class="bio-photo" alt="Eugene Petrenko bio photo"></a>
        
        <span class="author vcard">By <span class="fn">Eugene Petrenko</span></span>
        <span class="entry-date date published"><time datetime="2014-05-14T20:30:00+00:00">May 14, 2014</time></span>
        <span class="entry-date date modified"><time datetime="2014-05-14T22:30:21.167+02:00">May 14, 2014</time></span>
        
        <span class="social-share-x">
  <a href="https://x.com/intent/tweet?hashtags=IoC,JRE,DependencyInjection,DI,Component,SpringFramework,SpringIoC,classloaders,Spring,ComponentContainer,java&amp;text=Spring%20Framework%20Component%20Container%20Decomposition&amp;url=https://jonnyzzz.com/blog/2014/05/14/spring-framework-component-container/&amp;via=jonnyzzz" title="Share on X" itemprop="X" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="14" height="14" style="vertical-align: middle; fill: currentColor;"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg> Post</a>
</span>
<span class="social-share-facebook">
  <a href="https://www.facebook.com/sharer/sharer.php?u=https://jonnyzzz.com/blog/2014/05/14/spring-framework-component-container/" title="Share on Facebook" itemprop="Facebook" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="14" height="14" style="vertical-align: middle; fill: currentColor;"><path d="M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12c0 4.84 3.44 8.87 8 9.8V15H8v-3h2V9.5C10 7.57 11.57 6 13.5 6H16v3h-2c-.55 0-1 .45-1 1v2h3v3h-3v6.95c5.05-.5 9-4.76 9-9.95z"/></svg> Like</a>
</span>
<!-- /.social-share -->

      </footer>
      <div class="entry-content">
        <p>
  In this post I explain how one could split one huge components container into a number
  of smaller ones
</p>

<h2>Introduction</h2>
<p>
  Spring Framework Component Container (or Spring Framework IoC Container) is an implementation of the
  <em><a href="http://en.wikipedia.org/wiki/Inversion_of_control">Inversion of Control</a></em> principle.
  This is also known as
  <em><a href="http://en.wikipedia.org/wiki/Dependency_injection">Dependency Injection</a></em>.
  So a typical application is represented as a number of components (beans,
  services; read java classes) with dependencies (either declared or auto discovered). The Component Container uses
  an .xml configuration files and/or Annotations on java classes. For more details you may refer to the
  <a href="http://docs.spring.io/spring/docs/3.0.x/reference/beans.html">Spring Framework documentation</a>
</p>
<h2>Problem statement</h2>
<p>Say you have an Application that uses IoC. It is now very easy to
  add new components and to pass mostly every component as the dependency for the first one. But in the long run it
  could lead to several issues.
</p>
<p>The <strong>first</strong> one is that most of
  components tend to depend transitively from most of the other components. So the Application turns into a knot of
  undetachable dependencies. So unit tests transform into complex integration tests, where the most of the
  Application components has to be created.
</p>
<p>
  The <strong>second</strong>problem is
  with library dependencies classpath. One could easily use library A, while library B is used in the other part of
  the Application. Say A depends on C v1.0 and B depends on C v2.0. Here is the problem. The ideal solution is to
  remove A and B libraries from main classpath and load each separately to get rid of the need of resolving an ideal
  version of the library C.
</p>
<h2>Splitting components</h2>
<p>How could we solve those
  issues? My answer is to split the application container into a number of sub containers. So we could hide some
  component implementation details from the other components. We split one container into the root container and a
  number of sub containers. The split would provide enough isolation both for component dependencies and for
  classpaths.
</p>
<p>The split process could be done in the following way. We take one big component
  (facade) and move all it's implementation details into a sub container. Iteratively we may hide all huge
  components implementations from the rest of the application and thus resolve the <em>first</em> issue.
</p>
<p>Speaking of the library dependencies. Each of sub container could load classes from extended
  classpath in a dedicated classloader. This helps to resolve the <em>second</em> issue.
</p>
<p>
  There
  are another solutions for dependency isolation. For example, you may take a look at
  <a href="http://en.wikipedia.org/wiki/OSGi">OSGi</a> framework. The solution below would be a much easier
  and it is only up to you what solution to consider.
</p>
<h2>Implementation</h2>
<p>
  Say you decided to split one component container in a number of sub containers. There is the list of tasks to implement:
</p>

<ul>
  <li>Create
    a sub container with parent of a root container (A)
  </li>
  <li>Make sub container scan classes from a
    specific classloader (B)
  </li>
  <li>Allow components from a sub container to depend from components from
    the root container (C)
  </li>
  <li>Declaratively export some components from a sub container to root
    container (D)
  </li>
</ul>

<h3>Simple Spring Sub Container (A, C)</h3>

<p>A child Spring container (context) is created in the following way. Call the constructor of a
  <a href="http://docs.spring.io/spring/docs/3.0.0.M3/reference/html/ch05s07.html">ClassPathXmlApplicationContext</a>.
  Pass current container (from the
  <a href="http://docs.spring.io/spring/docs/3.0.x/api/org/springframework/context/ApplicationContextAware.html?is-external=true">ApplicationContextAware</a>
  interface implementation), specify configuration resources and the name.
</p>
<p>
  The created sub
  container includes parent container components in the dependencies resolution.
</p>
<p>
  <strong>NOTE</strong>.
  Sub container configuration resources must <strong>NOT</strong> overlap with configuration resources
  of any other container in the application. Otherwise sub container may re-load all components from the application
  and crash.
</p>
<p>I recommend to consider <em>classpath*:META-INF/app-root-configuration-*.xml</em>
  for the root context and <em>classpath*:META-INF/app-child-configuration-*.xml</em> for a sub
  container to avoid the possible clash. Same applies for classes scan for annotations as well
</p>
<p>
  We put a sub container creation code into the root container component. The component implements
  <a href="http://docs.spring.io/spring/docs/3.0.x/api/org/springframework/beans/factory/InitializingBean.html">InitializingBean</a>
  to trigger sub container start.
</p>
<h3>Using Custom Classloader (B)</h3>

<p>
  Spring Framework provides API to specify custom classloader for the container. This is done in the following way:
</p>
<script type="syntaxhighlighter" class="brush:java"><![CDATA[

final subLoader = createSubContextClassLoader(...);
new ClassPathXmlApplicationContext(..., myParentApplicationContext) {
  @Override
  protected void initBeanDefinitionReader(XmlBeanDefinitionReader reader) {
    super.initBeanDefinitionReader(reader);

    //here we set the right classloader
    reader.setBeanClassLoader(subLoader);
    setClassLoader(subLoader);
  }
};
]]></script>
<h3>Exporting components to the root container (D)</h3>
<p>There is an expected need to be able
  to export some component implementations back to the root container. This could be easily done via
  <a href="http://docs.spring.io/spring/docs/3.0.x/reference/beans.html#beans-beanfactory">BeanFactory</a>.
  What we need is to declare a <strong>non generic</strong> getter methods in the sub container creating
  component. The getter methods should be registered as factory methods in the root container (in .xml file or via
  annotations). For the getter implementation you may simply call a wrapping method with explicit type over
  <em>ApplicationContext#&lt;T&gt;getBean(Class&lt;T&gt; t) </em>.
</p>
<p>
  <strong>NOTE</strong>. Using a generic factory method may leave the
  container without knowing the exact type of the component. So application may randomly fail to resolve a component
  dependencies in the container. That is only why I recommend to avoid generic factory methods for the scenario.
</p>
<h2>Usage example</h2>
<p>
  I decided to implement the pattern in the new application I
  started. The main reason for me was to split the application classpath in to several modules to hide nasty
  dependencies in them. I realised I need to avoid the dependency resolution hell.
</p>
<p>
  Thanks to the
  pattern I split my application into several logical sub containers. This helped me to avoid dependencies hell. The
  pattern also forced me to hide implementation details. I have several components in the root container that are
  implemented by the number of internal components in sub containers. And each sub container depends on a number of
  libraries with intersecting transitive dependencies sets.
</p>
<p>The definition of a sub-container in the application is the following:</p>

<script type="syntaxhighlighter" class="brush:java"><![CDATA[
@Component
public class SubContext extends SubContextLoader {
  public SubContext() {
    super(
      /*name:*/
      "Sub Context",
      /*classpath dir:*/
      "/WEB-INF/sub",
      /*spring config: */
      "classpath*:/META-INF/vcs-service-hub-settings*.xml");
  }

  /** A SubFilter component implementation for
   ** the root container that created/loaded
   ** via sub container
   **/
  @Bean
  public SubFilter getFilterComponent() {
    return myApplicationContext.getBean(SubFilter.class);
  }
}
]]></script>
<p>
  To add the next sub container I only need to add a similar class to the root container. And that is it!
</p>
<h2>Conclusion</h2>
<p>
  Crazy, but one may use this technique recursively to provide
  even better separation and/or interface/implementation design.
</p>
<p>
  Hope I covered all details.
  Please let me know if you'd like me to cover some gaps
</p>

        
      </div><!-- /.entry-content -->
    </div><!-- /.entry-wrapper -->
    <nav class="pagination" role="navigation">
      
        <a href="/blog/2014/04/26/named-stack-frames-for-jvm/" class="btn" title="Named Stack Frames for the JVM">Previous</a>
      
      
        <a href="/blog/2014/11/02/teamcitynode-update/" class="btn" title="TeamCity.Node Update">Next</a>
      
    </nav><!-- /.pagination -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo" class="entry-wrapper">
    

<span>
  &copy; 2005—2026 Eugene Petrenko.
  <br />
  Unless otherwise noted, the content on the website is licensed under a
  <a href="https://creativecommons.org/licenses/by-nc-sa/4.0">CC BY-NC-SA 4.0</a> license.
  <br />
  Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using
  the <a href="https://mademistakes.com/work/so-simple-jekyll-theme/" rel="nofollow">So Simple Theme</a>.
</span>
<div class="social-icons">
  <a href="https://x.com/jonnyzzz" title="Eugene Petrenko on X" target="_blank"><svg class="social-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg></a>
  <a href="https://linkedin.com/in/jonnyzzz" title="Eugene Petrenko on LinkedIn" target="_blank"><svg class="social-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z"/></svg></a>
  <a href="https://github.com/jonnyzzz" title="Eugene Petrenko on Github" target="_blank"><svg class="social-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2z"/></svg></a>
  <a href="https://www.youtube.com/@jonnyzzz" title="Eugene Petrenko on YouTube" target="_blank"><svg class="social-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M23.498 6.186a2.959 2.959 0 0 0-2.079-2.08C19.58 3.6 12 3.6 12 3.6s-7.58 0-9.419.507a2.959 2.959 0 0 0-2.08 2.079C0 8.025 0 12 0 12s0 3.975.501 5.814a2.959 2.959 0 0 0 2.08 2.079C4.42 20.4 12 20.4 12 20.4s7.58 0 9.419-.507a2.959 2.959 0 0 0 2.08-2.079C24 15.975 24 12 24 12s0-3.975-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg></a>
  <a href="/feed.xml" title="Atom/RSS feed"><svg class="social-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6.18 15.64a2.18 2.18 0 0 1 2.18 2.18C8.36 19 7.38 20 6.18 20C5 20 4 19 4 17.82a2.18 2.18 0 0 1 2.18-2.18M4 4.44A15.56 15.56 0 0 1 19.56 20h-2.83A12.73 12.73 0 0 0 4 7.27V4.44m0 5.66a9.9 9.9 0 0 1 9.9 9.9h-2.83A7.07 7.07 0 0 0 4 12.93V10.1z"/></svg></a>
</div><!-- /.social-icons -->

  </footer>
</div><!-- /.footer-wrapper -->

<script>
  // Open external links in new tab
  Array.from(document.links).forEach(link => {
    // For development: 0.0.0.0, localhost, 127.0.0.1 are all local
    const localHosts = ['localhost', '127.0.0.1', '0.0.0.0'];
    const linkIsLocal = localHosts.includes(link.hostname);
    const pageIsLocal = localHosts.includes(window.location.hostname);

    // Internal if: both are local dev hosts, or hostnames match exactly
    const isInternal = (linkIsLocal && pageIsLocal) ||
                       (link.hostname === window.location.hostname);

    if (!isInternal) {
      link.target = '_blank';
    }
  });
</script>


<!-- Google Analytics (gtag.js) -->
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('consent', 'default', {
    'ad_storage': 'denied',
    'ad_user_data': 'denied',
    'ad_personalization': 'denied',
    'analytics_storage': 'denied'
  });
</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-BXXDX0ERFP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-BXXDX0ERFP');
</script>
<!-- End Google Analytics -->

<!-- PostHog Analytics -->
<script>
    !function(t,e){var o,n,p,r;e.__SV||(window.posthog && window.posthog.__loaded)||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.crossOrigin="anonymous",p.async=!0,p.src=s.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="init rs ls wi ns us ts ss capture calculateEventProperties vs register register_once register_for_session unregister unregister_for_session gs getFeatureFlag getFeatureFlagPayload getFeatureFlagResult isFeatureEnabled reloadFeatureFlags updateFlags updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures on onFeatureFlags onSurveysLoaded onSessionId getSurveys getActiveMatchingSurveys renderSurvey displaySurvey cancelPendingSurvey canRenderSurvey canRenderSurveyAsync identify setPersonProperties group resetGroups setPersonPropertiesForFlags resetPersonPropertiesForFlags setGroupPropertiesForFlags resetGroupPropertiesForFlags reset get_distinct_id getGroups get_session_id get_session_replay_url alias set_config startSessionRecording stopSessionRecording sessionRecordingStarted captureException startExceptionAutocapture stopExceptionAutocapture loadToolbar get_property getSessionProperty fs ds createPersonProfile setInternalOrTestUser ps Qr opt_in_capturing opt_out_capturing has_opted_in_capturing has_opted_out_capturing get_explicit_consent_status is_capturing clear_opt_in_out_capturing hs debug M cs getPageViewId captureTraceFeedback captureTraceMetric Kr".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
    posthog.init('phc_IPtbjwwy9YIGg0YNHNxYBePijvTvHEcKAjohah6obYW', {
        api_host: 'https://us.i.posthog.com',
        defaults: '2025-11-30',
        person_profiles: 'identified_only',
    })
</script>
<!-- End PostHog Analytics -->




<!--SYNTAX HIGHLIGHTER - Lazy loads PrismJS only when code blocks are present-->
<script>
(function() {
  // Check if page has any code blocks that need highlighting
  if (!document.querySelector('pre code, code[class*="language-"]')) return;

  // Load CSS
  var cssFiles = [
    'https://cdn.jsdelivr.net/npm/prismjs@1.30.0/themes/prism.min.css',
    'https://cdn.jsdelivr.net/npm/prismjs@1.30.0/plugins/line-numbers/prism-line-numbers.min.css',
    'https://cdn.jsdelivr.net/npm/prismjs@1.30.0/plugins/toolbar/prism-toolbar.min.css'
  ];
  cssFiles.forEach(function(href) {
    var link = document.createElement('link');
    link.rel = 'stylesheet';
    link.href = href;
    document.head.appendChild(link);
  });

  // Load JS in sequence (core first, then plugins)
  var jsFiles = [
    'https://cdn.jsdelivr.net/npm/prismjs@1.30.0/components/prism-core.min.js',
    'https://cdn.jsdelivr.net/npm/prismjs@1.30.0/plugins/autoloader/prism-autoloader.min.js',
    'https://cdn.jsdelivr.net/npm/prismjs@1.30.0/plugins/line-numbers/prism-line-numbers.min.js',
    'https://cdn.jsdelivr.net/npm/prismjs@1.30.0/plugins/toolbar/prism-toolbar.min.js',
    'https://cdn.jsdelivr.net/npm/prismjs@1.30.0/plugins/show-language/prism-show-language.min.js',
    'https://cdn.jsdelivr.net/npm/prismjs@1.30.0/plugins/normalize-whitespace/prism-normalize-whitespace.min.js'
  ];

  function loadScript(index) {
    if (index >= jsFiles.length) {
      // All scripts loaded, highlight code
      if (window.Prism) Prism.highlightAll();
      return;
    }
    var script = document.createElement('script');
    script.src = jsFiles[index];
    script.onload = function() { loadScript(index + 1); };
    document.head.appendChild(script);
  }
  loadScript(0);
})();
</script>



</body>
</html>
